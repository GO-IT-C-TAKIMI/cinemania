(function(){const o=document.createElement("link").relList;if(o&&o.supports&&o.supports("modulepreload"))return;for(const t of document.querySelectorAll('link[rel="modulepreload"]'))i(t);new MutationObserver(t=>{for(const c of t)if(c.type==="childList")for(const u of c.addedNodes)u.tagName==="LINK"&&u.rel==="modulepreload"&&i(u)}).observe(document,{childList:!0,subtree:!0});function a(t){const c={};return t.integrity&&(c.integrity=t.integrity),t.referrerPolicy&&(c.referrerPolicy=t.referrerPolicy),t.crossOrigin==="use-credentials"?c.credentials="include":t.crossOrigin==="anonymous"?c.credentials="omit":c.credentials="same-origin",c}function i(t){if(t.ep)return;t.ep=!0;const c=a(t);fetch(t.href,c)}})();function j(){const n=window.location.pathname,o=document.querySelectorAll("#header-links a"),a=document.querySelector(".menu-button"),i=document.querySelector(".responsive-overlay"),t=document.querySelector(".responsive-menu"),c=document.querySelector("body");let u=!1;a.addEventListener("click",()=>{t.classList.add("active-responsive-menu"),i.classList.add("active-overlay"),c.style.overflow="hidden",u=!0}),document.addEventListener("click",l=>{u&&!t.contains(l.target)&&!a.contains(l.target)&&(t.classList.remove("active-responsive-menu"),i.classList.remove("active-overlay"),c.style.overflow="auto",u=!1)}),window.addEventListener("resize",()=>{u&&(t.classList.remove("active-responsive-menu"),i.classList.remove("active-overlay"),c.style.overflow="auto",u=!1)}),o.forEach(l=>{"/cinemania"+new URL(l.getAttribute("href"),window.location.origin).pathname===n&&l.classList.add("active-link")})}const se=document.querySelector(".popup-section"),re=document.querySelector(".popup-section-container"),K=document.querySelector(".close-btn"),ce=document.querySelector("body");let H=!1;function R(){re.classList.add("hidden"),ce.style.overflow="auto",H=!1,document.removeEventListener("click",V),document.removeEventListener("keydown",Q),K.removeEventListener("click",W)}function V(n){H&&!se.contains(n.target)&&R()}function W(){H&&R()}function Q(n){H&&n.key==="Escape"&&R()}function X(){H=!0,document.addEventListener("click",V),document.addEventListener("keydown",Q),K.addEventListener("click",W)}const Z="3e7bd78082a78694a13d5e52c5addee0",le=document.querySelector(".popup-section"),ee=document.querySelector(".popup-section-container"),te=document.querySelector(".popup-content-container"),P=document.querySelector(".popup-trailer");function A(n){const o=document.querySelector(".afis-img"),a=document.querySelector(".film-title"),i=document.querySelector(".average-rating"),t=document.querySelector(".vote-count"),c=document.querySelector(".genre"),u=document.querySelector(".popularity"),l=document.querySelector(".film-about-desc");(async()=>{d();try{const S=await(await fetch(`https://api.themoviedb.org/3/movie/${n}?api_key=${Z}&language=en-US`)).json();C(S)}catch(g){console.error("Error fetching details:",g)}})();function C(g){d(),o.src=`https://image.tmdb.org/t/p/original/${g.poster_path}`,a.textContent=g.title,i.textContent=g.vote_average.toFixed(1),t.textContent=g.vote_count,u.textContent=g.popularity.toFixed(1),c.textContent=g.genres.map(S=>S.name).join(", "),l.textContent=g.overview,ee.classList.contains("hidden")||X()}function d(){P.style.display="none",te.style.display="flex",o.src="loading-placeholder.png",a.textContent="Loading...",i.textContent="",t.textContent="",u.textContent="",c.textContent="",l.textContent="Fetching details, please wait..."}}async function de(n){try{let c=function(){te.style.display="none",P.style.display="flex"};var o=c;const t=(await(await fetch(`https://api.themoviedb.org/3/movie/${n}/videos?api_key=${Z}&language=en-US`)).json()).results.find(l=>l.type==="Trailer"||l.type==="Teaser");let u=!1;u&&le.contains(e.target),u&&e.key,ee.classList.contains("hidden")||X(),t?(c(),P.innerHTML+=`<iframe src="https://www.youtube.com/embed/${t.key}" allowfullscreen></iframe>`):P.innerHTML+="<p>No trailer available</p>"}catch(a){console.error("Error fetching trailer:",a),P.innerHTML+="<p>Error loading trailer</p>"}}function U(n){const o=[{name:"fullStar",svg:`<svg width="24" height="24" class="star-icon-full">
                  <use class="full-star" href="svg/symbol-defs.svg#icon-star-outline"></use>
                </svg>`},{name:"halfStar",svg:`<svg width="24" height="24" class="star-icon-half">
                  <use href="svg/symbol-defs.svg#icon-star-half"></use>
                </svg>`},{name:"emptyStar",svg:`<svg width="24" height="24" class="star-icon-empty">
                  <use href="svg/symbol-defs.svg#icon-star-outline"></use>
                </svg>`}],a=5,i=Math.floor(n/2),t=n%2>=.5,c=a-i-(t?1:0);if(n===0)return"NOT RELEASED YET";const u=o.find(d=>d.name==="fullStar").svg,l=o.find(d=>d.name==="halfStar").svg,E=o.find(d=>d.name==="emptyStar").svg;let C=u.repeat(i);return t&&(C+=l),C+=E.repeat(c),C}function ne(n){let o=JSON.parse(localStorage.getItem("myLibrary"))||[];o.includes(n)||(o.push(n),localStorage.setItem("myLibrary",JSON.stringify(o)),D(!0,n))}function oe(n){const o=window.location.pathname;let a=JSON.parse(localStorage.getItem("myLibrary"))||[];a=a.filter(i=>i!==n),localStorage.setItem("myLibrary",JSON.stringify(a)),D(!1,n),o.includes("mylibrary.html")&&(me(n),ue())}function me(n){const o=document.querySelector(`[data-movie-id="${n}"]`);o&&o.remove();const a=JSON.parse(localStorage.getItem("myLibrary"))||[],i=document.querySelector("#catalog-movie-gallery");a.length===0&&(i.innerHTML="<p>Your library is empty.</p>")}function ue(){const n=document.querySelector(".popup-section-container");n&&(n.classList.add("hidden"),document.body.style.overflow="auto")}function N(n){return(JSON.parse(localStorage.getItem("myLibrary"))||[]).includes(n)}function D(n,o){const a=document.querySelectorAll(".add-btn"),i=document.querySelectorAll(".remove-btn");n?(a.forEach(t=>t.classList.add("hidden")),i.forEach(t=>t.classList.remove("hidden"))):(a.forEach(t=>t.classList.remove("hidden")),i.forEach(t=>t.classList.add("hidden"))),a.forEach(t=>t.onclick=()=>ne(o)),i.forEach(t=>t.onclick=()=>oe(o))}function pe(n){const o=document.getElementById("upcoming-add-btn"),a=document.getElementById("upcoming-remove-btn");function i(){N(n)?(o.classList.add("hidden"),a.classList.remove("hidden")):(o.classList.remove("hidden"),a.classList.add("hidden"))}o.onclick=()=>{ne(n),i()},a.onclick=()=>{oe(n),i()},i()}function G(){const n="3e7bd78082a78694a13d5e52c5addee0",o=window.location.pathname,a=document.querySelector(".popup-trailer"),i=document.getElementById("movies-image-container"),t=document.getElementById("movies-description-container"),c=document.querySelector(".popup-section-container"),u=document.querySelector("body"),l=()=>{o.includes("/")||o.includes("catalog.html")?(i.innerHTML='<img class="image" src="./img/stranger_things.jpeg"/>',t.innerHTML=`
        <h1 class="hero-movie-title">Let's Make Your Own Cinema</h1>
        <div class="desc-button-container">
          <p class="hero-movie-desc">Is a guide to creating a personalized movie theater experience. You'll need a projector, screen, and speakers. Decorate your space, choose your films, and stock up on snacks for the full experience.</p>
          <div class="hero-movie-buttons">
            <button class="orange-button btn-hero trailer">Get Started</button>
          </div>
        </div>
      `):(i.innerHTML='<img class="image" src="./img/seats.png"/>',t.innerHTML=`
        <h1 class="hero-movie-title">Create Your Dream Cinema</h1>
        <div class="desc-button-container">
          <p class="hero-movie-desc"> Is a guide to designing a personalized movie theater experience with the right equipment, customized decor, and favorite films. This guide helps you bring the cinema experience into your own home with cozy seating, dim lighting, and movie theater snacks.</p>
        </div>
      `)},E=async()=>{try{const d=await fetch(`https://api.themoviedb.org/3/trending/movie/week?api_key=${n}&language=en-US`);if(!d.ok)throw l(),new Error("Failed to fetch trending movies");const p=(await d.json()).results.filter(s=>new Date(s.release_date).getFullYear()>=2024),r=p[Math.floor(Math.random()*p.length)];C(r)}catch(d){console.error("Error fetching trending movies:",d)}},C=async d=>{try{const S=await(await fetch(`https://api.themoviedb.org/3/movie/${d.id}/images?&api_key=${n}&language=en&language=null`)).json(),p=S.backdrops[Math.floor(Math.random()*S.backdrops.length)],r=d.overview.split(" ").slice(0,40).join(" ");i.innerHTML=`<img class="image" src="https://image.tmdb.org/t/p/original${p.file_path}" /> <div class="gradient"></div>`,t.innerHTML=`
        <h1 class="hero-movie-title">${d.title}</h1>
        <div class="stars-container" id="starsContainer"></div>
        <div class="desc-button-container">
          <p class="hero-movie-desc">${r}...</p>
          <div class="hero-movie-buttons">
            <button id="trailer" class="orange-button btn-hero trailer">Watch trailer</button>
            <button id="details" class="white-button btn-hero details">More details</button>
          </div>
        </div>
      `,starsContainer.innerHTML=U(d.vote_average);const s=document.getElementById("trailer"),v=document.getElementById("details");U(d.vote_average),v.addEventListener("click",()=>{c.classList.remove("hidden"),u.style.overflow="hidden";const y=d.id;A(y);const w=N(y);D(w,y)}),s.addEventListener("click",async()=>{c.classList.remove("hidden"),u.style.overflow="hidden",a.innerHTML="",de(d.id)})}catch(g){console.error("Error displaying movie:",g)}};E()}async function ae(){const n="3e7bd78082a78694a13d5e52c5addee0",o="https://api.themoviedb.org/3/discover/movie?sort_by=popularity.desc&api_key="+n,a="https://image.tmdb.org/t/p/w500";let i="",t="";const c=window.location.pathname,u=document.querySelector(".pagination"),l=c.includes("catalog"),E=document.getElementById("catalog-movie-gallery"),C=document.querySelector(".catalog-desc-container"),d=l?document.getElementById("prevPageBtn"):null,g=l?document.getElementById("nextPageBtn"):null,S=l?document.querySelector(".page-numbers"):null,p=l?document.getElementById("searchButton"):null,r=l?document.getElementById("movieYear"):null;let s=1,v={},y=100;l?C.style.display="none":(C.style.display="flex",u.style.display="none");async function w(){const f=`https://api.themoviedb.org/3/genre/movie/list?api_key=${n}&language=en-US`;try{v=(await(await fetch(f)).json()).genres.reduce((M,m)=>(M[m.id]=m.name,M),{})}catch(h){console.error("Error fetching genres:",h)}}async function k(f=1,h="",B=""){const M=Math.ceil(f*9/20);let m=`${o}&page=${M}`;h&&!B?m=`https://api.themoviedb.org/3/search/movie?query=${h}&api_key=${n}&page=${M}`:h&&B&&(m=`https://api.themoviedb.org/3/search/movie?api_key=${n}&query=${h}&primary_release_year=${B}&page=${M}`);try{const L=await(await fetch(m)).json();if(c.includes("catalog")){const x=(f-1)%2*9,_=L.results.slice(x,x+9);I(_)}else{const x=(f-1)%2*3,_=L.results.slice(x,x+3);I(_)}return l&&(y=Math.min(L.total_pages,1e3),q()),L}catch(b){console.error("Error fetching movies:",b)}}function I(f){E.innerHTML="",f.forEach(m=>{const b=document.createElement("div");b.classList.add("catalog-movie-card"),b.dataset.movieId=m.id;const L=document.createElement("img");L.src=a+m.poster_path,L.alt=m.title,L.classList.add("catalog-movie-poster");const x=document.createElement("div");x.classList.add("catalog-movie-info");const _=document.createElement("h2");_.textContent=m.title,_.classList.add("catalog-movie-title");const O=document.createElement("div");O.classList.add("catalog-movie-details-rating");const Y=document.createElement("p"),z=m.genre_ids.map(ie=>v[ie]||"Unknown").filter(Boolean);Y.textContent=`${z[0]}, ${z[1]} | ${m.release_date.split("-")[0]}`,Y.classList.add("catalog-movie-details");const F=document.createElement("p");F.innerHTML=U(m.vote_average),F.classList.add("catalog-movie-rating"),x.appendChild(_),O.appendChild(Y),O.appendChild(F),x.appendChild(O),b.appendChild(L),b.appendChild(x),E.appendChild(b)});const h=document.querySelectorAll(".catalog-movie-card"),B=document.querySelector(".popup-section-container"),M=document.querySelector("body");h.forEach(m=>{m.addEventListener("click",b=>{const L=Number(b.currentTarget.dataset.movieId);A(L),B.classList.remove("hidden"),M.style.overflow="hidden";const x=N(L);D(x,L)})})}function q(){if(!l)return;S.innerHTML="";const f=3,h=1;if(T(1),s>h+2){const m=document.createElement("span");m.textContent="...",S.appendChild(m)}const B=Math.max(2,s-Math.floor(f/2)),M=Math.min(y-1,s+Math.floor(f/2));for(let m=B;m<=M;m++)T(m);if(s<y-h-1){const m=document.createElement("span");m.textContent="...",S.appendChild(m)}y>1&&T(y),d.disabled=s===1,g.disabled=s===y}async function T(f){const h=document.createElement("button");h.textContent=f,h.classList.add("page-number"),f===s&&h.classList.add("active"),h.addEventListener("click",async()=>{s=f,await k(s,i,t),q()}),S.appendChild(h)}l&&(d.addEventListener("click",async()=>{s>1&&(s--,await k(s),q())}),g.addEventListener("click",async()=>{s<y&&(s++,await k(s),q())}),document.getElementById("movieName").addEventListener("input",()=>{const f=document.getElementById("movieYear");f.innerHTML="",r.style.display="none",t=""}),p.addEventListener("click",async()=>{try{i=document.getElementById("movieName").value,t=document.getElementById("movieYear").value||"";const f=async(B,M="")=>await k(1,B,M);l&&q();const h=await f(i,t);if(h.results.length===0?r.style.display="none":r.style.display="block",Array.isArray(h.results)){if(!t){const B=h.results.map(b=>b.release_date?new Date(b.release_date).getFullYear():null).filter(b=>b!==null),M=[...new Set(B)].sort((b,L)=>b-L),m=document.getElementById("movieYear");m.innerHTML===""&&M.forEach(b=>{const L=document.createElement("option");L.value=b,L.text=b,m.appendChild(L)})}}else console.error("Beklenmeyen sonuç: movies bir dizi değil")}catch(f){console.error("Film verilerini işlerken hata:",f)}}));async function $(){await w(),await k()}$()}function ge(){const n="3e7bd78082a78694a13d5e52c5addee0",o=`https://api.themoviedb.org/3/movie/upcoming?api_key=${n}&language=en-US`,a=`https://api.themoviedb.org/3/genre/movie/list?api_key=${n}&language=en-US`,i=document.getElementById("movie-poster"),t=document.getElementById("movie-title"),c=document.getElementById("release-date"),u=document.getElementById("vote-average"),l=document.getElementById("vote-count"),E=document.getElementById("popularity"),C=document.getElementById("genres"),d=document.getElementById("overview");let g={};fetch(a).then(p=>p.json()).then(p=>{p.genres.forEach(r=>{g[r.id]=r.name}),fetch(o).then(r=>r.json()).then(r=>{const s=r.results;if(s.length>0){const v=s[Math.floor(Math.random()*s.length)];S(v)}else document.querySelector(".upcoming__title").textContent="No upcoming movies this month"}).catch(r=>console.error("Error fetching movies:",r))}).catch(p=>console.error("Error fetching genres:",p));function S(p){i.src=`https://image.tmdb.org/t/p/original/${p.backdrop_path}`,i.alt=p.title,t.textContent=p.title.toUpperCase(),c.textContent=p.release_date,u.textContent=p.vote_average,l.textContent=p.vote_count,E.textContent=p.popularity.toFixed(1),C.textContent=p.genre_ids.map(r=>g[r]).join(", "),p.overview&&p.overview.trim()!==""?d.textContent=p.overview:d.textContent="No overview available for this movie.",pe(p.id)}}function J(){document.addEventListener("DOMContentLoaded",()=>{const n=document.getElementById("theme-toggle"),o=localStorage.getItem("theme")||"light-theme";document.body.classList.add(o),n.addEventListener("click",()=>{document.body.classList.toggle("light-theme"),document.body.classList.toggle("dark-theme");const a=document.body.classList.contains("dark-theme")?"dark-theme":"light-theme";localStorage.setItem("theme",a)})})}function ye(){const n=JSON.parse(localStorage.getItem("myLibrary"))||[];let o=[],a=[];const i=document.querySelector("#catalog-movie-gallery"),t=document.querySelector(".load-more-button"),c=document.querySelector(".empty-library-container"),u=document.querySelector(".search-movie-button"),l="https://image.tmdb.org/t/p/w500";let E=0;const C=9,d=async()=>{try{const r=n.map(async s=>{const v=await fetch(`https://api.themoviedb.org/3/movie/${s}?api_key=3e7bd78082a78694a13d5e52c5addee0&language=en-US`);if(!v.ok)throw new Error("API request failed");return v.json()});o=await Promise.all(r),a=o,g(),p(o)}catch(r){console.error("Error fetching films:",r)}};function g(){a.slice(E,E+C).forEach(s=>{const v=S(s);i.appendChild(v)}),E+=C,E>=a.length?(t.style.display="none",u.style.display="none",c.style.display="none"):(c.style.display="none",t.style.display="flex",u.style.display="none")}function S(r){const s=document.createElement("div");s.classList.add("catalog-movie-card"),s.dataset.movieId=r.id;const v=document.createElement("img");v.src=l+r.poster_path,v.alt=r.title,v.classList.add("catalog-movie-poster");const y=document.createElement("div");y.classList.add("catalog-movie-info");const w=document.createElement("h2");w.textContent=r.title,w.classList.add("catalog-movie-title");const k=document.createElement("div");k.classList.add("catalog-movie-details-rating");const I=document.createElement("p"),q=r.genres.map($=>$.name);I.textContent=`${q[0]}, ${q[1]} | ${r.release_date.split("-")[0]}`,I.classList.add("catalog-movie-details");const T=document.createElement("p");return T.innerHTML=U(r.vote_average),T.classList.add("catalog-movie-rating"),y.appendChild(w),k.appendChild(I),k.appendChild(T),y.appendChild(k),s.appendChild(v),s.appendChild(y),s.addEventListener("click",()=>{A(r.id),document.querySelector(".popup-section-container").classList.remove("hidden"),document.body.style.overflow="hidden";const $=N(r.id);D($,r.id)}),s}function p(r){const s=document.getElementById("film-category"),v=new Set;r.forEach(y=>{y.genres.forEach(w=>{v.add(w.name)})}),v.forEach(y=>{const w=document.createElement("option");w.value=y,w.innerText=y,s.appendChild(w)}),s.addEventListener("change",y=>{const w=y.target.value;i.innerHTML="",E=0,w===""?a=o:a=o.filter(k=>k.genres.some(I=>I.name===w)),g()})}t.addEventListener("click",g),n.length>0&&d()}window.location.pathname.includes("catalog.html")&&(j(),G(),ae(),J());window.location.pathname.includes("mylibrary.html")&&(j(),G(),J(),ye());!window.location.pathname.includes("mylibrary.html")&&!window.location.pathname.includes("catalog.html")&&(j(),G(),ge(),ae(),J());
//# sourceMappingURL=main-CPhd6mzr.js.map
