(function(){const o=document.createElement("link").relList;if(o&&o.supports&&o.supports("modulepreload"))return;for(const e of document.querySelectorAll('link[rel="modulepreload"]'))r(e);new MutationObserver(e=>{for(const u of e)if(u.type==="childList")for(const c of u.addedNodes)c.tagName==="LINK"&&c.rel==="modulepreload"&&r(c)}).observe(document,{childList:!0,subtree:!0});function s(e){const u={};return e.integrity&&(u.integrity=e.integrity),e.referrerPolicy&&(u.referrerPolicy=e.referrerPolicy),e.crossOrigin==="use-credentials"?u.credentials="include":e.crossOrigin==="anonymous"?u.credentials="omit":u.credentials="same-origin",u}function r(e){if(e.ep)return;e.ep=!0;const u=s(e);fetch(e.href,u)}})();function U(){const t=window.location.pathname,o=document.querySelectorAll("#header-links a"),s=document.querySelector(".menu-button"),r=document.querySelector(".responsive-overlay"),e=document.querySelector(".responsive-menu"),u=document.querySelector("body");let c=!1;s.addEventListener("click",()=>{e.classList.add("active-responsive-menu"),r.classList.add("active-overlay"),u.style.overflow="hidden",c=!0}),document.addEventListener("click",h=>{c&&!e.contains(h.target)&&!s.contains(h.target)&&(e.classList.remove("active-responsive-menu"),r.classList.remove("active-overlay"),u.style.overflow="auto",c=!1)}),window.addEventListener("resize",()=>{c&&(e.classList.remove("active-responsive-menu"),r.classList.remove("active-overlay"),u.style.overflow="auto",c=!1)}),o.forEach(h=>{let E=h.getAttribute("href");E.startsWith("/")&&(E=`/cinemania${E}`),new URL(E,window.location.origin).pathname===t&&h.classList.add("active-link")})}function N(t){const o="3e7bd78082a78694a13d5e52c5addee0",s=document.querySelector(".popup-section-container"),r=document.querySelector(".popup-section"),e=document.querySelector(".close-btn"),u=document.querySelector("body"),c=document.querySelector(".afis-img"),h=document.querySelector(".film-title"),E=document.querySelector(".average-rating"),l=document.querySelector(".vote-count"),v=document.querySelector(".genre"),S=document.querySelector(".popularity"),d=document.querySelector(".film-about-desc");(async()=>{g();try{const L=await(await fetch(`https://api.themoviedb.org/3/movie/${t}?api_key=${o}&language=en-US`)).json();n(L)}catch(i){console.error("Error fetching details:",i)}})();function n(i){c.src=`https://image.tmdb.org/t/p/original/${i.poster_path}`,h.textContent=i.title,E.textContent=i.vote_average,l.textContent=i.vote_count,S.textContent=i.popularity.toFixed(1),v.textContent=i.genres.map(_=>_.name).join(", "),d.textContent=i.overview;let L=!1;function w(){s.classList.add("hidden"),u.style.overflow="auto",L=!1,document.removeEventListener("click",I),document.removeEventListener("keydown",x),e.removeEventListener("click",k)}function I(_){L&&!r.contains(_.target)&&w()}function k(_){L&&w()}function x(_){L&&_.key==="Escape"&&w()}s.classList.contains("hidden")||(L=!0,document.addEventListener("click",I),document.addEventListener("keydown",x),e.addEventListener("click",k))}function g(){c.src="loading-placeholder.png",h.textContent="Loading...",E.textContent="",l.textContent="",S.textContent="",v.textContent="",d.textContent="Fetching details, please wait..."}}function P(t){const o=[{name:"fullStar",svg:`<svg width="24" height="24" class="star-icon-full">
                  <use class="full-star" href="svg/symbol-defs.svg#icon-star-outline"></use>
                </svg>`},{name:"halfStar",svg:`<svg width="24" height="24" class="star-icon-half">
                  <use href="svg/symbol-defs.svg#icon-star-half"></use>
                </svg>`},{name:"emptyStar",svg:`<svg width="24" height="24" class="star-icon-empty">
                  <use href="svg/symbol-defs.svg#icon-star-outline"></use>
                </svg>`}],s=5,r=Math.floor(t/2),e=t%2>=.5,u=s-r-(e?1:0);if(t===0)return"NOT RELEASED YET";const c=o.find(v=>v.name==="fullStar").svg,h=o.find(v=>v.name==="halfStar").svg,E=o.find(v=>v.name==="emptyStar").svg;let l=c.repeat(r);return e&&(l+=h),l+=E.repeat(u),l}function A(t){let o=JSON.parse(localStorage.getItem("myLibrary"))||[];o.includes(t)||(o.push(t),localStorage.setItem("myLibrary",JSON.stringify(o)),T(!0,t))}function G(t){const o=window.location.pathname;let s=JSON.parse(localStorage.getItem("myLibrary"))||[];s=s.filter(r=>r!==t),localStorage.setItem("myLibrary",JSON.stringify(s)),T(!1,t),o.includes("mylibrary.html")&&(K(t),W())}function K(t){const o=document.querySelector(`[data-movie-id="${t}"]`);o&&o.remove();const s=JSON.parse(localStorage.getItem("myLibrary"))||[],r=document.querySelector("#catalog-movie-gallery");s.length===0&&(r.innerHTML="<p>Your library is empty.</p>")}function W(){const t=document.querySelector(".popup-section-container");t&&(t.classList.add("hidden"),document.body.style.overflow="auto")}function H(t){return(JSON.parse(localStorage.getItem("myLibrary"))||[]).includes(t)}function T(t,o){const s=document.querySelectorAll(".add-btn"),r=document.querySelectorAll(".remove-btn");t?(s.forEach(e=>e.classList.add("hidden")),r.forEach(e=>e.classList.remove("hidden"))):(s.forEach(e=>e.classList.remove("hidden")),r.forEach(e=>e.classList.add("hidden"))),s.forEach(e=>e.onclick=()=>A(o)),r.forEach(e=>e.onclick=()=>G(o))}function V(t){const o=document.getElementById("upcoming-add-btn"),s=document.getElementById("upcoming-remove-btn");function r(){H(t)?(o.classList.add("hidden"),s.classList.remove("hidden")):(o.classList.remove("hidden"),s.classList.add("hidden"))}o.onclick=()=>{A(t),r()},s.onclick=()=>{G(t),r()},r()}function j(){const t="3e7bd78082a78694a13d5e52c5addee0",o=window.location.pathname,s=document.getElementById("movies-image-container"),r=document.getElementById("movies-description-container"),e=document.querySelector(".popup-section-container"),u=document.querySelector("body"),c=()=>{o.includes("/")||o.includes("catalog.html")?(s.innerHTML='<img class="image" src="./img/stranger_things.jpeg"/>',r.innerHTML=`
        <h1 class="hero-movie-title">Let's Make Your Own Cinema</h1>
        <div class="desc-button-container">
          <p class="hero-movie-desc">Is a guide to creating a personalized movie theater experience. You'll need a projector, screen, and speakers. Decorate your space, choose your films, and stock up on snacks for the full experience.</p>
          <div class="hero-movie-buttons">
            <button class="orange-button btn-hero trailer">Get Started</button>
          </div>
        </div>
      `):(s.innerHTML='<img class="image" src="./img/seats.png"/>',r.innerHTML=`
        <h1 class="hero-movie-title">Create Your Dream Cinema</h1>
        <div class="desc-button-container">
          <p class="hero-movie-desc"> Is a guide to designing a personalized movie theater experience with the right equipment, customized decor, and favorite films. This guide helps you bring the cinema experience into your own home with cozy seating, dim lighting, and movie theater snacks.</p>
        </div>
      `)},h=async()=>{try{const l=await fetch(`https://api.themoviedb.org/3/trending/movie/week?api_key=${t}&language=en-US`);if(!l.ok)throw c(),new Error("Failed to fetch trending movies");const d=(await l.json()).results.filter(n=>new Date(n.release_date).getFullYear()>=2024),a=d[Math.floor(Math.random()*d.length)];E(a)}catch(l){console.error("Error fetching trending movies:",l)}},E=async l=>{try{const S=await(await fetch(`https://api.themoviedb.org/3/movie/${l.id}/images?&api_key=${t}&language=en&language=null`)).json(),d=S.backdrops[Math.floor(Math.random()*S.backdrops.length)],a=l.overview.split(" ").slice(0,40).join(" ");s.innerHTML=`<img class="image" src="https://image.tmdb.org/t/p/original${d.file_path}" /> <div class="gradient"></div>`,r.innerHTML=`
        <h1 class="hero-movie-title">${l.title}</h1>
        <div class="stars-container" id="starsContainer"></div>
        <div class="desc-button-container">
          <p class="hero-movie-desc">${a}...</p>
          <div class="hero-movie-buttons">
            <button id="trailer" class="orange-button btn-hero trailer">Watch trailer</button>
            <button id="details" class="white-button btn-hero details">More details</button>
          </div>
        </div>
      `,starsContainer.innerHTML=P(l.vote_average);const n=document.getElementById("trailer"),g=document.getElementById("details");P(l.vote_average),g.addEventListener("click",()=>{e.classList.remove("hidden"),u.style.overflow="hidden";const i=l.id;N(i);const L=H(i);T(L,i)}),n.addEventListener("click",async()=>{modal.innerHTML="";try{const w=(await(await fetch(`https://api.themoviedb.org/3/movie/${l.id}/videos?api_key=${t}&language=en-US`)).json()).results.find(I=>I.type==="Trailer"||I.type==="Teaser");w?modal.innerHTML+=`<iframe src="https://www.youtube.com/embed/${w.key}" allowfullscreen></iframe>`:modal.innerHTML+="<p>No trailer available</p>"}catch(i){console.error("Error fetching trailer:",i),modal.innerHTML+="<p>Error loading trailer</p>"}})}catch(v){console.error("Error displaying movie:",v)}};h()}async function J(){const t="3e7bd78082a78694a13d5e52c5addee0",o="https://api.themoviedb.org/3/discover/movie?sort_by=popularity.desc&api_key="+t,s="https://image.tmdb.org/t/p/w500";let r="",e="";const u=window.location.pathname,c=u.includes("catalog"),h=document.getElementById("catalog-movie-gallery"),E=document.querySelector(".catalog-desc-container"),l=c?document.getElementById("prevPageBtn"):null,v=c?document.getElementById("nextPageBtn"):null,S=c?document.querySelector(".page-numbers"):null,d=c?document.getElementById("searchButton"):null,a=c?document.getElementById("movieYear"):null;let n=1,g={},i=100;c?E.style.display="none":E.style.display="flex";async function L(){const y=`https://api.themoviedb.org/3/genre/movie/list?api_key=${t}&language=en-US`;try{g=(await(await fetch(y)).json()).genres.reduce((C,m)=>(C[m.id]=m.name,C),{})}catch(p){console.error("Error fetching genres:",p)}}async function w(y=1,p="",M=""){const C=Math.ceil(y*9/20);let m=`${o}&page=${C}`;p&&!M?m=`https://api.themoviedb.org/3/search/movie?query=${p}&api_key=${t}&page=${C}`:p&&M&&(m=`https://api.themoviedb.org/3/search/movie?api_key=${t}&query=${p}&primary_release_year=${M}&page=${C}`);try{const b=await(await fetch(m)).json();if(u.includes("catalog")){const B=(y-1)%2*9,q=b.results.slice(B,B+9);I(q)}else{const B=(y-1)%2*3,q=b.results.slice(B,B+3);I(q)}return c&&(i=Math.min(b.total_pages,1e3),k()),b}catch(f){console.error("Error fetching movies:",f)}}function I(y){h.innerHTML="",y.forEach(m=>{const f=document.createElement("div");f.classList.add("catalog-movie-card"),f.dataset.movieId=m.id;const b=document.createElement("img");b.src=s+m.poster_path,b.alt=m.title,b.classList.add("catalog-movie-poster");const B=document.createElement("div");B.classList.add("catalog-movie-info");const q=document.createElement("h2");q.textContent=m.title,q.classList.add("catalog-movie-title");const $=document.createElement("div");$.classList.add("catalog-movie-details-rating");const D=document.createElement("p"),R=m.genre_ids.map(z=>g[z]||"Unknown").filter(Boolean);D.textContent=`${R[0]}, ${R[1]} | ${m.release_date.split("-")[0]}`,D.classList.add("catalog-movie-details");const O=document.createElement("p");O.innerHTML=P(m.vote_average),O.classList.add("catalog-movie-rating"),B.appendChild(q),$.appendChild(D),$.appendChild(O),B.appendChild($),f.appendChild(b),f.appendChild(B),h.appendChild(f)});const p=document.querySelectorAll(".catalog-movie-card"),M=document.querySelector(".popup-section-container"),C=document.querySelector("body");p.forEach(m=>{m.addEventListener("click",f=>{const b=Number(f.currentTarget.dataset.movieId);N(b),M.classList.remove("hidden"),C.style.overflow="hidden";const B=H(b);T(B,b)})})}function k(){if(!c)return;S.innerHTML="";const y=3,p=1;if(x(1),n>p+2){const m=document.createElement("span");m.textContent="...",S.appendChild(m)}const M=Math.max(2,n-Math.floor(y/2)),C=Math.min(i-1,n+Math.floor(y/2));for(let m=M;m<=C;m++)x(m);if(n<i-p-1){const m=document.createElement("span");m.textContent="...",S.appendChild(m)}i>1&&x(i),l.disabled=n===1,v.disabled=n===i}async function x(y){const p=document.createElement("button");p.textContent=y,p.classList.add("page-number"),y===n&&p.classList.add("active"),p.addEventListener("click",async()=>{n=y,await w(n,r,e),k()}),S.appendChild(p)}c&&(l.addEventListener("click",async()=>{n>1&&(n--,await w(n),k())}),v.addEventListener("click",async()=>{n<i&&(n++,await w(n),k())}),document.getElementById("movieName").addEventListener("input",()=>{const y=document.getElementById("movieYear");y.innerHTML="",a.style.display="none",e=""}),d.addEventListener("click",async()=>{try{r=document.getElementById("movieName").value,e=document.getElementById("movieYear").value||"";const y=async(M,C="")=>await w(1,M,C);c&&k();const p=await y(r,e);if(p.results.length===0?a.style.display="none":a.style.display="block",Array.isArray(p.results)){if(!e){const M=p.results.map(f=>f.release_date?new Date(f.release_date).getFullYear():null).filter(f=>f!==null),C=[...new Set(M)].sort((f,b)=>f-b),m=document.getElementById("movieYear");m.innerHTML===""&&C.forEach(f=>{const b=document.createElement("option");b.value=f,b.text=f,m.appendChild(b)})}}else console.error("Beklenmeyen sonuç: movies bir dizi değil")}catch(y){console.error("Film verilerini işlerken hata:",y)}}));async function _(){await L(),await w()}_()}function Q(){console.log("upcoming sayfasinin js i calisti");const t="3e7bd78082a78694a13d5e52c5addee0",o=`https://api.themoviedb.org/3/movie/upcoming?api_key=${t}&language=en-US`,s=`https://api.themoviedb.org/3/genre/movie/list?api_key=${t}&language=en-US`,r=document.getElementById("movie-poster"),e=document.getElementById("movie-title"),u=document.getElementById("release-date"),c=document.getElementById("vote-average"),h=document.getElementById("vote-count"),E=document.getElementById("popularity"),l=document.getElementById("genres"),v=document.getElementById("overview");let S={};fetch(s).then(a=>a.json()).then(a=>{a.genres.forEach(n=>{S[n.id]=n.name}),fetch(o).then(n=>n.json()).then(n=>{const g=n.results;if(g.length>0){const i=g[Math.floor(Math.random()*g.length)];d(i)}else document.querySelector(".upcoming__title").textContent="No upcoming movies this month"}).catch(n=>console.error("Error fetching movies:",n))}).catch(a=>console.error("Error fetching genres:",a));function d(a){r.src=`https://image.tmdb.org/t/p/original/${a.backdrop_path}`,r.alt=a.title,e.textContent=a.title,u.textContent=a.release_date,c.textContent=a.vote_average,h.textContent=a.vote_count,E.textContent=a.popularity,l.textContent=a.genre_ids.map(n=>S[n]).join(", "),a.overview&&a.overview.trim()!==""?v.textContent=a.overview:v.textContent="No overview available for this movie.",V(a.id)}}function Y(){console.log("footer sayfasinin js i calisti")}function F(){document.addEventListener("DOMContentLoaded",()=>{const t=document.getElementById("theme-toggle"),o=localStorage.getItem("theme")||"light-theme";document.body.classList.add(o),t.addEventListener("click",()=>{document.body.classList.toggle("light-theme"),document.body.classList.toggle("dark-theme");const s=document.body.classList.contains("dark-theme")?"dark-theme":"light-theme";localStorage.setItem("theme",s)})})}function X(){const t=JSON.parse(localStorage.getItem("myLibrary"))||[];let o=[],s=[];const r=document.querySelector("#catalog-movie-gallery"),e=document.querySelector(".load-more-button"),u="https://image.tmdb.org/t/p/w500";let c=0;const h=9,E=async()=>{try{const d=t.map(async a=>{const n=await fetch(`https://api.themoviedb.org/3/movie/${a}?api_key=3e7bd78082a78694a13d5e52c5addee0&language=en-US`);if(!n.ok)throw new Error("API request failed");return n.json()});o=await Promise.all(d),s=o,l(),S(o)}catch(d){console.error("Error fetching films:",d)}};function l(){s.slice(c,c+h).forEach(a=>{const n=v(a);r.appendChild(n)}),c+=h,c>=s.length?e.classList.add("hidden"):e.classList.remove("hidden")}function v(d){const a=document.createElement("div");a.classList.add("catalog-movie-card"),a.dataset.movieId=d.id;const n=document.createElement("img");n.src=u+d.poster_path,n.alt=d.title,n.classList.add("catalog-movie-poster");const g=document.createElement("div");g.classList.add("catalog-movie-info");const i=document.createElement("h2");i.textContent=d.title,i.classList.add("catalog-movie-title");const L=document.createElement("div");L.classList.add("catalog-movie-details-rating");const w=document.createElement("p"),I=d.genres.map(x=>x.name);w.textContent=`${I[0]}, ${I[1]} | ${d.release_date.split("-")[0]}`,w.classList.add("catalog-movie-details");const k=document.createElement("p");return k.innerHTML=P(d.vote_average),k.classList.add("catalog-movie-rating"),g.appendChild(i),L.appendChild(w),L.appendChild(k),g.appendChild(L),a.appendChild(n),a.appendChild(g),a.addEventListener("click",()=>{N(d.id),document.querySelector(".popup-section-container").classList.remove("hidden"),document.body.style.overflow="hidden";const x=H(d.id);T(x,d.id)}),a}function S(d){const a=document.getElementById("film-category"),n=new Set;d.forEach(g=>{g.genres.forEach(i=>{n.add(i.name)})}),n.forEach(g=>{const i=document.createElement("option");i.value=g,i.innerText=g,a.appendChild(i)}),a.addEventListener("change",g=>{const i=g.target.value;r.innerHTML="",c=0,i===""?s=o:s=o.filter(L=>L.genres.some(w=>w.name===i)),l()})}e.addEventListener("click",l),t.length>0?E():console.log("Library is empty")}window.location.pathname.includes("catalog.html")&&(U(),j(),J(),Y(),F());window.location.pathname.includes("mylibrary.html")&&(U(),j(),Y(),F(),X());!window.location.pathname.includes("mylibrary.html")&&!window.location.pathname.includes("catalog.html")&&(U(),j(),Q(),J(),Y(),F());
//# sourceMappingURL=main-BcLdwOUY.js.map
