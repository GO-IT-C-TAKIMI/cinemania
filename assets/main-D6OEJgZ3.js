(function(){const o=document.createElement("link").relList;if(o&&o.supports&&o.supports("modulepreload"))return;for(const t of document.querySelectorAll('link[rel="modulepreload"]'))i(t);new MutationObserver(t=>{for(const c of t)if(c.type==="childList")for(const d of c.addedNodes)d.tagName==="LINK"&&d.rel==="modulepreload"&&i(d)}).observe(document,{childList:!0,subtree:!0});function a(t){const c={};return t.integrity&&(c.integrity=t.integrity),t.referrerPolicy&&(c.referrerPolicy=t.referrerPolicy),t.crossOrigin==="use-credentials"?c.credentials="include":t.crossOrigin==="anonymous"?c.credentials="omit":c.credentials="same-origin",c}function i(t){if(t.ep)return;t.ep=!0;const c=a(t);fetch(t.href,c)}})();function F(){const n=window.location.pathname,o=document.querySelectorAll("#header-links a"),a=document.querySelector(".menu-button"),i=document.querySelector(".responsive-overlay"),t=document.querySelector(".responsive-menu"),c=document.querySelector("body");let d=!1;a.addEventListener("click",()=>{t.classList.add("active-responsive-menu"),i.classList.add("active-overlay"),c.style.overflow="hidden",d=!0}),document.addEventListener("click",m=>{d&&!t.contains(m.target)&&!a.contains(m.target)&&(t.classList.remove("active-responsive-menu"),i.classList.remove("active-overlay"),c.style.overflow="auto",d=!1)}),window.addEventListener("resize",()=>{d&&(t.classList.remove("active-responsive-menu"),i.classList.remove("active-overlay"),c.style.overflow="auto",d=!1)}),o.forEach(m=>{"/cinemania"+new URL(m.getAttribute("href"),window.location.origin).pathname===n&&m.classList.add("active-link")})}const se=document.querySelector(".popup-section"),re=document.querySelector(".popup-section-container"),z=document.querySelector(".close-btn"),ce=document.querySelector("body");let $=!1;function j(){re.classList.add("hidden"),ce.style.overflow="auto",$=!1,document.removeEventListener("click",K),document.removeEventListener("keydown",W),z.removeEventListener("click",V)}function K(n){$&&!se.contains(n.target)&&j()}function V(){$&&j()}function W(n){$&&n.key==="Escape"&&j()}function Q(){$=!0,document.addEventListener("click",K),document.addEventListener("keydown",W),z.addEventListener("click",V)}const X="3e7bd78082a78694a13d5e52c5addee0",le=document.querySelector(".popup-section"),Z=document.querySelector(".popup-section-container"),ee=document.querySelector(".popup-content-container"),_=document.querySelector(".popup-trailer");function R(n){const o=document.querySelector(".afis-img"),a=document.querySelector(".film-title"),i=document.querySelector(".average-rating"),t=document.querySelector(".vote-count"),c=document.querySelector(".genre"),d=document.querySelector(".popularity"),m=document.querySelector(".film-about-desc");(async()=>{p();try{const l=await(await fetch(`https://api.themoviedb.org/3/movie/${n}?api_key=${X}&language=en-US`)).json();S(l)}catch(h){console.error("Error fetching details:",h)}})();function S(h){p(),o.src=`https://image.tmdb.org/t/p/original/${h.poster_path}`,a.textContent=h.title,i.textContent=h.vote_average.toFixed(1),t.textContent=h.vote_count,d.textContent=h.popularity.toFixed(1),c.textContent=h.genres.map(l=>l.name).join(", "),m.textContent=h.overview,Z.classList.contains("hidden")||Q()}function p(){_.style.display="none",ee.style.display="flex",o.src="loading-placeholder.png",a.textContent="Loading...",i.textContent="",t.textContent="",d.textContent="",c.textContent="",m.textContent="Fetching details, please wait..."}}async function de(n){try{let c=function(){ee.style.display="none",_.style.display="flex"};var o=c;const t=(await(await fetch(`https://api.themoviedb.org/3/movie/${n}/videos?api_key=${X}&language=en-US`)).json()).results.find(m=>m.type==="Trailer"||m.type==="Teaser");let d=!1;d&&le.contains(e.target),d&&e.key,Z.classList.contains("hidden")||Q(),t?(c(),_.innerHTML+=`<iframe src="https://www.youtube.com/embed/${t.key}" allowfullscreen></iframe>`):_.innerHTML+="<p>No trailer available</p>"}catch(a){console.error("Error fetching trailer:",a),_.innerHTML+="<p>Error loading trailer</p>"}}function D(n){const o=[{name:"fullStar",svg:`<svg width="24" height="24" class="star-icon-full">
                  <use class="full-star" href="svg/symbol-defs.svg#icon-star-outline"></use>
                </svg>`},{name:"halfStar",svg:`<svg width="24" height="24" class="star-icon-half">
                  <use href="svg/symbol-defs.svg#icon-star-half"></use>
                </svg>`},{name:"emptyStar",svg:`<svg width="24" height="24" class="star-icon-empty">
                  <use href="svg/symbol-defs.svg#icon-star-outline"></use>
                </svg>`}],a=5,i=Math.floor(n/2),t=n%2>=.5,c=a-i-(t?1:0);if(n===0)return"NOT RELEASED YET";const d=o.find(p=>p.name==="fullStar").svg,m=o.find(p=>p.name==="halfStar").svg,C=o.find(p=>p.name==="emptyStar").svg;let S=d.repeat(i);return t&&(S+=m),S+=C.repeat(c),S}function te(n){let o=JSON.parse(localStorage.getItem("myLibrary"))||[];o.includes(n)||(o.push(n),localStorage.setItem("myLibrary",JSON.stringify(o)),P(!0,n))}function ne(n){const o=window.location.pathname;let a=JSON.parse(localStorage.getItem("myLibrary"))||[];a=a.filter(i=>i!==n),localStorage.setItem("myLibrary",JSON.stringify(a)),P(!1,n),o.includes("mylibrary.html")&&(me(n),ue())}function me(n){const o=document.querySelector(`[data-movie-id="${n}"]`);o&&o.remove();const a=JSON.parse(localStorage.getItem("myLibrary"))||[],i=document.querySelector("#catalog-movie-gallery");a.length===0&&(i.innerHTML="<p>Your library is empty.</p>")}function ue(){const n=document.querySelector(".popup-section-container");n&&(n.classList.add("hidden"),document.body.style.overflow="auto")}function O(n){return(JSON.parse(localStorage.getItem("myLibrary"))||[]).includes(n)}function P(n,o){const a=document.querySelectorAll(".add-btn"),i=document.querySelectorAll(".remove-btn");n?(a.forEach(t=>t.classList.add("hidden")),i.forEach(t=>t.classList.remove("hidden"))):(a.forEach(t=>t.classList.remove("hidden")),i.forEach(t=>t.classList.add("hidden"))),a.forEach(t=>t.onclick=()=>te(o)),i.forEach(t=>t.onclick=()=>ne(o))}function pe(n){const o=document.getElementById("upcoming-add-btn"),a=document.getElementById("upcoming-remove-btn");function i(){O(n)?(o.classList.add("hidden"),a.classList.remove("hidden")):(o.classList.remove("hidden"),a.classList.add("hidden"))}o.onclick=()=>{te(n),i()},a.onclick=()=>{ne(n),i()},i()}function A(){const n="3e7bd78082a78694a13d5e52c5addee0",o=window.location.pathname,a=document.querySelector(".popup-trailer"),i=document.getElementById("movies-image-container"),t=document.getElementById("movies-description-container"),c=document.querySelector(".popup-section-container"),d=document.querySelector("body"),m=()=>{o.includes("/")||o.includes("catalog.html")?(i.innerHTML='<img class="image" src="./img/stranger_things.jpeg"/>',t.innerHTML=`
        <h1 class="hero-movie-title">Let's Make Your Own Cinema</h1>
        <div class="desc-button-container">
          <p class="hero-movie-desc">Is a guide to creating a personalized movie theater experience. You'll need a projector, screen, and speakers. Decorate your space, choose your films, and stock up on snacks for the full experience.</p>
          <div class="hero-movie-buttons">
            <button class="orange-button btn-hero trailer">Get Started</button>
          </div>
        </div>
      `):(i.innerHTML='<img class="image" src="./img/seats.png"/>',t.innerHTML=`
        <h1 class="hero-movie-title">Create Your Dream Cinema</h1>
        <div class="desc-button-container">
          <p class="hero-movie-desc"> Is a guide to designing a personalized movie theater experience with the right equipment, customized decor, and favorite films. This guide helps you bring the cinema experience into your own home with cozy seating, dim lighting, and movie theater snacks.</p>
        </div>
      `)},C=async()=>{try{const p=await fetch(`https://api.themoviedb.org/3/trending/movie/week?api_key=${n}&language=en-US`);if(!p.ok)throw m(),new Error("Failed to fetch trending movies");const s=(await p.json()).results.filter(r=>new Date(r.release_date).getFullYear()>=2024),u=s[Math.floor(Math.random()*s.length)];S(u)}catch(p){console.error("Error fetching trending movies:",p)}},S=async p=>{try{const l=await(await fetch(`https://api.themoviedb.org/3/movie/${p.id}/images?&api_key=${n}&language=en&language=null`)).json(),s=l.backdrops[Math.floor(Math.random()*l.backdrops.length)],u=p.overview.split(" ").slice(0,40).join(" ");i.innerHTML=`<img class="image" src="https://image.tmdb.org/t/p/original${s.file_path}" /> <div class="gradient"></div>`,t.innerHTML=`
        <h1 class="hero-movie-title">${p.title}</h1>
        <div class="stars-container" id="starsContainer"></div>
        <div class="desc-button-container">
          <p class="hero-movie-desc">${u}...</p>
          <div class="hero-movie-buttons">
            <button id="trailer" class="orange-button btn-hero trailer">Watch trailer</button>
            <button id="details" class="white-button btn-hero details">More details</button>
          </div>
        </div>
      `,starsContainer.innerHTML=D(p.vote_average);const r=document.getElementById("trailer"),y=document.getElementById("details");D(p.vote_average),y.addEventListener("click",()=>{c.classList.remove("hidden"),d.style.overflow="hidden";const E=p.id;R(E);const B=O(E);P(B,E)}),r.addEventListener("click",async()=>{c.classList.remove("hidden"),d.style.overflow="hidden",a.innerHTML="",de(p.id)})}catch(h){console.error("Error displaying movie:",h)}};C()}async function oe(){const n="3e7bd78082a78694a13d5e52c5addee0",o="https://api.themoviedb.org/3/discover/movie?sort_by=popularity.desc&api_key="+n,a="https://image.tmdb.org/t/p/w500";let i="",t="";const c=window.location.pathname,d=document.querySelector(".pagination"),m=c.includes("catalog"),C=document.getElementById("catalog-movie-gallery"),S=document.querySelector(".catalog-desc-container"),p=m?document.getElementById("prevPageBtn"):null,h=m?document.getElementById("nextPageBtn"):null,l=m?document.querySelector(".page-numbers"):null,s=m?document.getElementById("searchButton"):null,u=m?document.getElementById("movieYear"):null;let r=1,y={},E=100;m?S.style.display="none":(S.style.display="flex",d.style.display="none");async function B(){const f=`https://api.themoviedb.org/3/genre/movie/list?api_key=${n}&language=en-US`;try{y=(await(await fetch(f)).json()).genres.reduce((w,g)=>(w[g.id]=g.name,w),{})}catch(v){console.error("Error fetching genres:",v)}}async function I(f=1,v="",M=""){const w=Math.ceil(f*9/20);let g=`${o}&page=${w}`;v&&!M?g=`https://api.themoviedb.org/3/search/movie?query=${v}&api_key=${n}&page=${w}`:v&&M&&(g=`https://api.themoviedb.org/3/search/movie?api_key=${n}&query=${v}&primary_release_year=${M}&page=${w}`);try{const b=await(await fetch(g)).json();if(c.includes("catalog")){const k=(f-1)%2*9,q=b.results.slice(k,k+9);T(q)}else{const k=(f-1)%2*3,q=b.results.slice(k,k+3);T(q)}return m&&(E=Math.min(b.total_pages,1e3),x()),b}catch(L){console.error("Error fetching movies:",L)}}function T(f){C.innerHTML="",f.forEach(g=>{const L=document.createElement("div");L.classList.add("catalog-movie-card"),L.dataset.movieId=g.id;const b=document.createElement("img");b.src=a+g.poster_path,b.alt=g.title,b.classList.add("catalog-movie-poster");const k=document.createElement("div");k.classList.add("catalog-movie-info");const q=document.createElement("h2");q.textContent=g.title,q.classList.add("catalog-movie-title");const H=document.createElement("div");H.classList.add("catalog-movie-details-rating");const N=document.createElement("p"),J=g.genre_ids.map(ie=>y[ie]||"Unknown").filter(Boolean);N.textContent=`${J[0]}, ${J[1]} | ${g.release_date.split("-")[0]}`,N.classList.add("catalog-movie-details");const Y=document.createElement("p");Y.innerHTML=D(g.vote_average),Y.classList.add("catalog-movie-rating"),k.appendChild(q),H.appendChild(N),H.appendChild(Y),k.appendChild(H),L.appendChild(b),L.appendChild(k),C.appendChild(L)});const v=document.querySelectorAll(".catalog-movie-card"),M=document.querySelector(".popup-section-container"),w=document.querySelector("body");v.forEach(g=>{g.addEventListener("click",L=>{const b=Number(L.currentTarget.dataset.movieId);R(b),M.classList.remove("hidden"),w.style.overflow="hidden";const k=O(b);P(k,b)})})}function x(){if(!m)return;l.innerHTML="";const f=3,v=1;if(U(1),r>v+2){const g=document.createElement("span");g.textContent="...",l.appendChild(g)}const M=Math.max(2,r-Math.floor(f/2)),w=Math.min(E-1,r+Math.floor(f/2));for(let g=M;g<=w;g++)U(g);if(r<E-v-1){const g=document.createElement("span");g.textContent="...",l.appendChild(g)}E>1&&U(E),p.disabled=r===1,h.disabled=r===E}async function U(f){const v=document.createElement("button");v.textContent=f,v.classList.add("page-number"),f===r&&v.classList.add("active"),v.addEventListener("click",async()=>{r=f,await I(r,i,t),x()}),l.appendChild(v)}m&&(p.addEventListener("click",async()=>{r>1&&(r--,await I(r),x())}),h.addEventListener("click",async()=>{r<E&&(r++,await I(r),x())}),document.getElementById("movieName").addEventListener("input",()=>{const f=document.getElementById("movieYear");f.innerHTML="",u.style.display="none",t=""}),s.addEventListener("click",async()=>{try{i=document.getElementById("movieName").value,t=document.getElementById("movieYear").value||"";const f=async(M,w="")=>await I(1,M,w);m&&x();const v=await f(i,t);if(v.results.length===0?u.style.display="none":u.style.display="block",Array.isArray(v.results)){if(!t){const M=v.results.map(L=>L.release_date?new Date(L.release_date).getFullYear():null).filter(L=>L!==null),w=[...new Set(M)].sort((L,b)=>L-b),g=document.getElementById("movieYear");g.innerHTML===""&&w.forEach(L=>{const b=document.createElement("option");b.value=L,b.text=L,g.appendChild(b)})}}else console.error("Beklenmeyen sonuç: movies bir dizi değil")}catch(f){console.error("Film verilerini işlerken hata:",f)}}));async function ae(){await B(),await I()}ae()}function ge(){const n="3e7bd78082a78694a13d5e52c5addee0",o=`https://api.themoviedb.org/3/movie/upcoming?api_key=${n}&language=en-US`,a=`https://api.themoviedb.org/3/genre/movie/list?api_key=${n}&language=en-US`,i=document.getElementById("movie-poster"),t=document.getElementById("movie-title"),c=document.getElementById("release-date"),d=document.getElementById("vote-average"),m=document.getElementById("vote-count"),C=document.getElementById("popularity"),S=document.getElementById("genres"),p=document.getElementById("overview");let h={};fetch(a).then(s=>s.json()).then(s=>{s.genres.forEach(u=>{h[u.id]=u.name}),fetch(o).then(u=>u.json()).then(u=>{const r=u.results;if(r.length>0){const y=r[Math.floor(Math.random()*r.length)];l(y)}else document.querySelector(".upcoming__title").textContent="No upcoming movies this month"}).catch(u=>console.error("Error fetching movies:",u))}).catch(s=>console.error("Error fetching genres:",s));function l(s){i.src=`https://image.tmdb.org/t/p/original/${s.backdrop_path}`,i.alt=s.title,t.textContent=s.title.toUpperCase(),c.textContent=s.release_date,d.textContent=s.vote_average,m.textContent=s.vote_count,C.textContent=s.popularity.toFixed(1),S.textContent=s.genre_ids.map(u=>h[u]).join(", "),s.overview&&s.overview.trim()!==""?p.textContent=s.overview:p.textContent="No overview available for this movie.",pe(s.id)}}function G(){document.addEventListener("DOMContentLoaded",()=>{const n=document.getElementById("theme-toggle"),o=localStorage.getItem("theme")||"light-theme";document.body.classList.add(o),n.addEventListener("click",()=>{document.body.classList.toggle("light-theme"),document.body.classList.toggle("dark-theme");const a=document.body.classList.contains("dark-theme")?"dark-theme":"light-theme";localStorage.setItem("theme",a)})})}function he(){const n=JSON.parse(localStorage.getItem("myLibrary"))||[];let o=[],a=[];const i=document.querySelector("#catalog-movie-gallery"),t=document.querySelector(".load-more-button"),c="https://image.tmdb.org/t/p/w500";let d=0;const m=9,C=async()=>{try{const l=n.map(async s=>{const u=await fetch(`https://api.themoviedb.org/3/movie/${s}?api_key=3e7bd78082a78694a13d5e52c5addee0&language=en-US`);if(!u.ok)throw new Error("API request failed");return u.json()});o=await Promise.all(l),a=o,S(),h(o)}catch(l){console.error("Error fetching films:",l)}};function S(){a.slice(d,d+m).forEach(s=>{const u=p(s);i.appendChild(u)}),d+=m,d>=a.length?t.style.display="none":t.style.display="flex"}function p(l){const s=document.createElement("div");s.classList.add("catalog-movie-card"),s.dataset.movieId=l.id;const u=document.createElement("img");u.src=c+l.poster_path,u.alt=l.title,u.classList.add("catalog-movie-poster");const r=document.createElement("div");r.classList.add("catalog-movie-info");const y=document.createElement("h2");y.textContent=l.title,y.classList.add("catalog-movie-title");const E=document.createElement("div");E.classList.add("catalog-movie-details-rating");const B=document.createElement("p"),I=l.genres.map(x=>x.name);B.textContent=`${I[0]}, ${I[1]} | ${l.release_date.split("-")[0]}`,B.classList.add("catalog-movie-details");const T=document.createElement("p");return T.innerHTML=D(l.vote_average),T.classList.add("catalog-movie-rating"),r.appendChild(y),E.appendChild(B),E.appendChild(T),r.appendChild(E),s.appendChild(u),s.appendChild(r),s.addEventListener("click",()=>{R(l.id),document.querySelector(".popup-section-container").classList.remove("hidden"),document.body.style.overflow="hidden";const x=O(l.id);P(x,l.id)}),s}function h(l){const s=document.getElementById("film-category"),u=new Set;l.forEach(r=>{r.genres.forEach(y=>{u.add(y.name)})}),u.forEach(r=>{const y=document.createElement("option");y.value=r,y.innerText=r,s.appendChild(y)}),s.addEventListener("change",r=>{const y=r.target.value;i.innerHTML="",d=0,y===""?a=o:a=o.filter(E=>E.genres.some(B=>B.name===y)),S()})}t.addEventListener("click",S),n.length>0?C():console.log("Library is empty")}window.location.pathname.includes("catalog.html")&&(F(),A(),oe(),G());window.location.pathname.includes("mylibrary.html")&&(F(),A(),G(),he());!window.location.pathname.includes("catalog.html")&&!window.location.pathname.includes("library.html")&&(F(),A(),ge(),oe(),G());
//# sourceMappingURL=main-D6OEJgZ3.js.map
